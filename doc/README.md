# RESTful services (express/restify)

## Що таке REST?

REST розшифровується як REpresentational State Transfer.

Відмінною особливістю сервісів REST є те, що вони дозволяють найкращим чином використовувати протокол HTTP.

## Коротко про HTTP

HTTP - це протокол, що дозволяє виконувати операції над різноманітними ресурсами (create, read, update, delete - CRUD)

Ресурс - це узагальнене поняття, тобто все, що ви хочете показати зовнішньому світові через вашу програму. Наприклад:
* Конкретна сутність (entity)
* Конкретна задача
* Список задач

Кожен ресурс має свій ідентифікатор (URI - універсальний ідентифікатор ресурсів). Наприклад:
* /books
* /students/Ivan
* /cars/Mercedes
* /trucks/MAN/1

## Запит-відповідь в HTTP

Для того, щоб з ресурсами виконати CRUD-дії необхідно їх знайти за URI та передати їм вхідні параметри. Для цього використовується запит. Щоб отримати результат CRUD-дій, використовуються відповіді.

![image1](https://github.com/VitaliiZZzz/restful-services-on-restify/blob/master/doc/images/request_response.png)

Саме тому HTTP є технічною основою для створення та роботи веб-сервісів.

Запити та відповіді для зручності будуються за шаблоном.

### Будова запиту в HTTP

HTTP визначає наступну структуру запиту (request):

```
GET /wiki/HTTP HTTP/1.1
Host: uk.wikipedia.org
User-Agent: firefox/5.0 (Linux; Debian 5.0.8; en-US; rv:1.8.1.7) Gecko/20070914 Firefox/2.0.0.7
Connection: close
(пустий рядок)
```

* рядок запиту (request line) - визначає тип повідомлення
* заголовки запиту (header fields) - характеризують тіло повідомлення, параметри передачі та інші відомості
* тіло повідомлення (body) - необов'язкове

### Будова відповіді в HTTP

HTTP визначає наступну структуру відповідного повідомлення (response):

```
HTTP/1.1 200 OK
Server: Apache
Content-Language: uk
Content-Type: text/html; charset=utf-8
Content-Length: 1234
(пустий рядок)
```

* рядок стану (status line), що включає код стану та повідомлення про причини
* поля заголовка відповіді (header fields)
* додаткове тіло повідомлення (body)

### Типи HTTP-запиту

Тип, який міститься в HTTP-запиті, вказує на необхідну операцію з обраним ресурсом. (Дані типи лише вказують, а не виконують дії)
```
GET /movies/3
POST /movies
PUT /movies/2
DELETE /movies/1
```
* GET: отримати детальну інформацію про ресурс (Read)
* POST: створити новий ресурс (Create)
* PUT: оновити існуючий ресурс (Update)
* DELETE: видалити ресурс (Delete)

## REST та його зв'язок з HTTP

REST - це архітектурний стиль, побудований на HTTP. Оскільки HTTP добре реалізовує передачу параметрів та вказівку на CRUD операцію, що є досить логічним рішенням. Важливо відзначити, що REST - це лише ідея, а не технічна реалізація.

REST API - це технічна реалізація архітектурного стилю REST.

RESTful service - це веб-сервіс, побудований на REST.

### Принципи стилю REST

* Ідентифікує ресурси як HTTP.
* Використовує дієслова, вже визначені протоколом HTTP, для доступу до CRUD-операцій.
* Формат в середині запиту-відповіді - будь-який (JSON, XML, тощо).
* Тематика сервісу - будь-яка, оскільки REST є досить гнучким.
* Найголовніше в сервісі - ресурси.

## Express.js vs Restify.js

### Express

Express.js - вільне і відкрите програмне забезпечення під ліцензією MIT, фреймворк веб-додатків для Node.js, є backend'ом в стеці MEAN. Автор TJ Holowaychuk.

### Restify

Restify.js - вільне і відкрите програмне забезпечення під ліцензією MIT. Цей фреймворк оптимізований для створення семантично коректних веб-служб RESTful, готових до масштабного використання. Автор Mark Cavage.

### Порівняння

|            | Плюси | Мінуси |
| :--------: | :---: | :----: |
| Express.js | 1. Низький поріг входження, Express - це практично стандарт Node.js-додатку. | 1. Всі ресурси необхідно створювати вручну і, в результаті, з'явиться багато повторного коду або гірше - власна бібліотека. |
|            | 2. Повна кастомізація | 2. Кожен ресурс вимагає тестування або простої перевірки на 500-ту помилку. |
|            | 3. Розвинена спільнота | 3. Рефакторинг стане болючим, тому що буде необхідно правити все і всюди. |
|            | 4. Потужна документація | 4. Нема стандартного підходу, потрібно шукати свій. |
|            |  | 5. Швидкість роботи |
| Restify.js | 1. Підтримка DTrace, якщо API працює на платформі, яка його підтримує. | Мінуси такі ж як і у Express (окрім швидкості роботи) - багато зайвої праці. |
|            | 2. Немає такого зайвого функціоналу, як шаблони і рендеринг. |  |
|            | 3. Обмеження частоти запитів (throttling). |  |
|            | 4. Підтримка SPDY |  |

![image2](https://github.com/VitaliiZZzz/restful-services-on-restify/blob/master/doc/images/json_handing.png)
